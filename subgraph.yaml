specVersion: 0.0.2
description: Sublime Finance Subgraph
repository: https://github.com/sublime-finance/sublime-subgraph
schema:
  file: ./schema.graphql
dataSources:
  - kind: ethereum/contract
    name: CreditLine
    network: kovan
    source:
      address: "0xA102E6f5Bda8d1222520345a759D298B68938e5C"
      abi: CreditLine
      startBlock: 28282173
    mapping:
      kind: ethereum/eventHandlers
      apiVersion: 0.0.4
      language: wasm/assemblyscript
      file: ./src/CreditLine.ts
      entities:
        - CreditLine
        - CreditLineGlobalParam
      abis:
        - name: CreditLine
          file: ./abis/CreditLine.json
      eventHandlers:
        - event: BorrowedFromCreditLine(indexed uint256,uint256)
          handler: handleBorrowedFromCreditLine
        - event: CompleteCreditLineRepaid(indexed uint256,uint256)
          handler: handleCompleteCreditLineRepaid
        - event: CreditLineAccepted(indexed uint256)
          handler: handleCreditLineAccepted
        - event: CreditLineClosed(indexed uint256)
          handler: handleCreditLineClosed
        - event: CreditLineLiquidated(indexed uint256,indexed address)
          handler: handleCreditLineLiquidated
        - event: CreditLineRequested(indexed uint256,indexed address,indexed address)
          handler: handleCreditLineRequested
        - event: CreditLineReset(indexed uint256)
          handler: handleCreditLineReset
        - event: DefaultStrategyUpdated(indexed address)
          handler: handleDefaultStrategyUpdated
        - event: LiquidationRewardFractionUpdated(uint256)
          handler: handleLiquidationRewardFractionUpdated
        - event: OwnershipTransferred(indexed address,indexed address)
          handler: handleOwnershipTransferred
        - event: PartialCreditLineRepaid(indexed uint256,uint256)
          handler: handlePartialCreditLineRepaid
        - event: PriceOracleUpdated(indexed address)
          handler: handlePriceOracleUpdated
        - event: ProtocolFeeCollectorUpdated(indexed address)
          handler: handleProtocolFeeCollectorUpdated
        - event: ProtocolFeeFractionUpdated(uint256)
          handler: handleProtocolFeeFractionUpdated
        - event: SavingsAccountUpdated(indexed address)
          handler: handleSavingsAccountUpdated
        - event: StrategyRegistryUpdated(indexed address)
          handler: handleStrategyRegistryUpdated
  - kind: ethereum/contract
    name: StrategyRegistry
    network: kovan
    source:
      address: "0xA4366F7376A5425F9Bc0226ced35ad8f4536FD56"
      abi: StrategyRegistry
      startBlock:
    mapping:
      kind: ethereum/eventHandlers
      apiVersion: 0.0.4
      language: wasm/assemblyscript
      file: ./src/strategyRegistry/strategyRegistry.ts
      entities:
        - StrategyRegistry
        - Strategy
      abis:
        - name: StrategyRegistry
          file: ./abis/StrategyRegistry.json
      eventHandlers:
        - event: StrategyAdded(indexed address)
          handler: handleStrategyAdded
        - event: StrategyRemoved(indexed address)
          handler: handleStrategyRemoved
        - event: MaxStrategiesUpdated(uint256)
          handler: handleMaxStrategiesUpdate
  - kind: ethereum/contract
    name: SavingsAccount
    network: kovan
    source:
      address: "0x69A634cE54588ba06b7813dA31C26832aa2ffa8c"
      abi: SavingsAccount
      startBlock: 28282364
    mapping:
      kind: ethereum/eventHandlers
      apiVersion: 0.0.4
      language: wasm/assemblyscript
      file: ./src/savingsAccount/savingsAccount.ts
      entities:
        - SavingsAccount
        - Balance
        - BalancePerStrategy
        - Allowance
        - AllowancePerAddress
      abis:
        - name: SavingsAccount
          file: ./abis/SavingsAccount.json
      eventHandlers:
        - event: Deposited(indexed address,uint256,indexed address,indexed address)
          handler: handleDeposit
        - event: Approved(indexed address,indexed address,indexed address,uint256)
          handler: handleApproval
        - event: CreditLineAllowanceRefreshed(indexed address,indexed address,indexed address,uint256)
          handler: handleCreditLineAllowanceRefreshed
        - event: CreditLineUpdated(indexed address)
          handler: handleCreditLineUpdate
        - event: StrategyRegistryUpdated(indexed address)
          handler: handleStrategyRegistryUpdate
        - event: StrategySwitched(indexed address,indexed address,uint256,uint256,address,indexed address)
          handler: handleStrategySwitched
        - event: Transfer(indexed address,address,indexed address,indexed address,uint256)
          handler: handleTransfer
        - event: Withdrawn(indexed address,indexed address,uint256,indexed address,address)
          handler: handleWithdraw
        - event: WithdrawnAll(indexed address,uint256,indexed address)
          handler: handleWithdrawAll
