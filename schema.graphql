enum Status {
  VERIFIED
  UNVERIFIED
}

enum LoanStatus {
  INACTIVE
  ACTIVE
  CLOSED
  CANCELLED
  DEFAULTED
  TERMINATED
}

type LendingDetails @entity {
  id: ID!
  pool: Pool!
  lender: User!
  amountSupplied: BigInt!
  amountWithdrawn: BigInt!
  percentWithdrawable: BigInt
  collateralCalled: Boolean!
}

type Pool @entity {
  id: ID!
  poolId: Bytes!
  poolOwner: User!
  borrowTokenType: Bytes!
  collateralTokenType: Bytes!
  lendingRate: BigInt!
  borrowRate: BigInt!
  loanDuration: BigInt
  collateralRatio: BigInt!
  nextDueBlock: BigInt
  extensionRequested: BigInt
  loanStatus: LoanStatus!
  collectedAmount: BigInt
  collateralCalls: BigInt
  amountRepaid: BigInt
  votingCalls: BigInt
  colleteralDeposited: BigInt!
  vaultShares: BigInt
  lenders: [LendingDetails!] @derivedFrom(field: "pool")
  whitelistedAddress: [Bytes!]
  isPrivate: Boolean!
}

type User @entity {
  id: ID!
  address: Bytes!
  borrowingPools: [Pool!] @derivedFrom(field: "poolOwner")
  lendingPools: [LendingDetails!] @derivedFrom(field: "lender")
  status: Status!
  twitterDetails: TwitterDetails
}

type TwitterDetails @entity {
  id: ID!
  twitterId: Bytes!
  twitterSignMessage: String!
  timeRegistered: BigInt!  
  linkedAddresses: [Bytes!]!
}
